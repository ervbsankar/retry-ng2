{"version":3,"sources":["smartTableModule/component/smart-table.component.ts"],"names":[],"mappings":"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","file":"smart-table.component.js","sourcesContent":["import {Component, OnInit, EventEmitter} from \"@angular/core\";\r\nimport {SafeHtml, DomSanitizer} from \"@angular/platform-browser\";\r\n@Component({\r\n    selector: \"smart-table\",\r\n    inputs: [\"columns\",\"rows\"],\r\n    outputs: [\"tableChanged\",\"cellClicked\"],\r\n    templateUrl: \"./app/smartTableModule/component/smart-table.component.html\"\r\n})\r\n\r\nexport class SmartTableComponent implements OnInit {\r\n\r\n    public columns: Array<any> = [];\r\n    public rows: Array<any> = [];\r\n\r\n    public _rows: Array<any> = [];\r\n\r\n    public tableChanged:EventEmitter<any> = new EventEmitter();\r\n    public cellClicked:EventEmitter<any> = new EventEmitter();\r\n\r\n    public config: any = {\r\n        paging: true,\r\n        filter: true,\r\n        sorting: {columns: this.columns},\r\n        filtering: {filterString: ''},\r\n        className: ['table-striped', 'table-bordered']\r\n    };\r\n\r\n    public constructor(private sanitizer: DomSanitizer) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        this._rows = this.rows;\r\n    }\r\n\r\n    public sanitize(html: string): SafeHtml {\r\n        return this.sanitizer.bypassSecurityTrustHtml(html);\r\n    }\r\n\r\n\r\n    public getData(row:any, propertyName:string):string {\r\n      return propertyName.split('.')\r\n            .reduce((prev:any, curr:string) => prev[curr], row);\r\n    }\r\n\r\n    public onChangeTable(column:any):void {\r\n        this.columns.forEach((col:any) => {\r\n            if (col.name !== column.name && col.sort !== false) {\r\n                col.sort = '';\r\n            }\r\n        });\r\n\r\n        let sortedData = this.changeSort();\r\n        this.rows = sortedData;\r\n       this.tableChanged.emit(this.columns);\r\n    }\r\n\r\n\r\n    public cellClick(row:any, column:any):void {\r\n        this.cellClicked.emit({row, column});\r\n    }\r\n\r\n\r\n    public onFilterChange(config: any, column: any) {\r\n        console.log(config);\r\n        console.log(column);\r\n        this._rows = this.rows;\r\n\r\n        this.columns.forEach(col => {\r\n            if(col.filtering){\r\n                if(col.filtering.filterString)\r\n                this._rows = this.rows.filter((row: any) => {\r\n                    return row[col.name].toLowerCase().indexOf(col.filtering.filterString.toLowerCase()) >= 0;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    public changeSort() : any{\r\n\r\n        let sort:string = void 0;\r\n        let columnName:string = void 0;\r\n\r\n        this.columns.forEach((col:any) => {\r\n            if (col.sort !== '' && col.sort !== false) {\r\n                sort = col.sort;\r\n                columnName = col.name;\r\n            }\r\n        });\r\n\r\n        return this.rows.sort((previous: any, current: any) => {\r\n            if (previous[columnName] > current[columnName]) {\r\n                return sort === 'desc' ? -1 : 1;\r\n            } else if (previous[columnName] < current[columnName]) {\r\n                return sort === 'asc' ? -1 : 1;\r\n            }\r\n            return 0;\r\n        })\r\n\r\n    }\r\n\r\n}"]}